#include "methods.h"

int main(int argc,char **argv){

/***************************************************************************************************/
/***********************************DÉCLARATION DES VARIABLES***************************************/
/***************************************************************************************************/
    FILE *fp;
    xmlDoc *fichier;
    char *filename;
/***************************************************************************************************/
/************************CONDITIONS VERIFIANT LE FICHIER XML A OUVRIR*******************************/
/***************************************************************************************************/
    if(argc!=2){
        printf("Oupsi... you need to add a XML file!\n");
        return 1;
    }
    printf("File : %s\n\n",argv[1]);
    
/***************************************************************************************************/
/************************************RECUP° DU FICHIER*********************************************/
/***************************************************************************************************/      
    filename= argv[1];
    char *compare;
    compare = strstr(filename,".xml");

/***************************************************************************************************/
/******************************VERIFIER SI C'EST UN FICHIER XML*************************************/
/***************************************************************************************************/   
    if(compare==NULL){
        printf("It's not a XML file!\n");
        return 1;
    }
    
/***************************************************************************************************/
/************************************LECTURE DU FICHIER*********************************************/
/***************************************************************************************************/   
    fichier=xmlReadFile(filename,NULL, 0);

    if(fichier==NULL){
        printf("The file is empty\n");
        return 1;
    }

/***************************************************************************************************/
/**************************************CHOIX DU MODE************************************************/
/***************************************************************************************************/   
    printf("Which mode do you want ? \n 1: Bronze mode\t\t2: Silver mode\t\t3: Gold mode\t\t4: I want to choose my own parameters\n");
    int mode; 
    scanf("%u",&mode);
    //fonction qui fait appel au choix du mode.

    switch(mode){
/***************************************************************************************************/
/******************************************BRONZE***************************************************/
/***************************************************************************************************/   
        case 1 :
            printf("You chose the bronze mode.\n"); 
            fp=fopen("BronzeResult.csv", "w");
            blastOutPut_iteration(fichier, fp, 1, NULL);
            //méthode bronze ici.
            break;
/***************************************************************************************************/
/******************************************ARGENT***************************************************/
/***************************************************************************************************/  
        case 2: 
            printf("You chose the Silver mode\n");
            fp=fopen("SilverResult.csv", "w");
            blastOutPut_iteration(fichier, fp, 2, NULL);
            break;
/***************************************************************************************************/
/******************************************GOLD*****************************************************/
/***************************************************************************************************/  
        case 3 :
            printf("You chose the Gold mode\n");
            fp=fopen("GoldResult.csv", "w");
            blastOutPut_iteration(fichier, fp, 3, NULL);
            break;
/***************************************************************************************************/
/***********************************CHOIX DE L'UTILISATEUR******************************************/
/***************************************************************************************************/  
        case 4: 
            printf("Please choose your parameters\n"); 
            fp =fopen("Results.csv", "r");
            //SOUS FORME DE LISTE POUR AJOUTER LES ARGUMENTS
            break;
    }

    return 0;
}

